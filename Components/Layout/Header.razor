@using RiskWeb.Services
@using Microsoft.AspNetCore.Components.Authorization
@inject ModuleStateService ModuleState

<AuthorizeView>
    <Authorized>
        <header class="riskweb-header">
            <div class="header-row">
                <div class="header-left">
                    <div class="header-logo">
                        <img src="images/ABLogoHorizRev.png" alt="AllianceBernstein" />
                    </div>
                    <div class="header-title">RiskWeb</div>
                    <nav class="header-nav">
                        <button class="module-link @(ModuleState.CurrentModule == "Liquidity" ? "active" : "")"
                                @onclick='() => SelectModule("Liquidity")'>
                            Liquidity
                        </button>
                        <button class="module-link @(ModuleState.CurrentModule == "SEC" ? "active" : "")"
                                @onclick='() => SelectModule("SEC")'>
                            SEC
                        </button>
                        <button class="module-link @(ModuleState.CurrentModule == "Lux" ? "active" : "")"
                                @onclick='() => SelectModule("Lux")'>
                            Lux
                        </button>
                        <button class="module-link @(ModuleState.CurrentModule == "Misc" ? "active" : "")"
                                @onclick='() => SelectModule("Misc")'>
                            Misc
                        </button>
                    </nav>
                </div>
                <div class="header-user">
                    @context.User.Identity?.Name
                </div>
            </div>
        </header>
    </Authorized>
    <NotAuthorized>
        <header class="riskweb-header">
            <div class="header-row">
                <div class="header-left">
                    <div class="header-logo">
                        <img src="images/ABLogoHorizRev.png" alt="AllianceBernstein" />
                    </div>
                    <div class="header-title">RiskWeb</div>
                    <nav class="header-nav">
                        <button class="module-link @(ModuleState.CurrentModule == "Liquidity" ? "active" : "")"
                                @onclick='() => SelectModule("Liquidity")'>
                            Liquidity
                        </button>
                        <button class="module-link @(ModuleState.CurrentModule == "SEC" ? "active" : "")"
                                @onclick='() => SelectModule("SEC")'>
                            SEC
                        </button>
                        <button class="module-link @(ModuleState.CurrentModule == "Lux" ? "active" : "")"
                                @onclick='() => SelectModule("Lux")'>
                            Lux
                        </button>
                        <button class="module-link @(ModuleState.CurrentModule == "Misc" ? "active" : "")"
                                @onclick='() => SelectModule("Misc")'>
                            Misc
                        </button>
                    </nav>
                </div>
                <div class="header-user">
                    Guest
                </div>
            </div>
        </header>
    </NotAuthorized>
</AuthorizeView>

@code {
    private void SelectModule(string module)
    {
        ModuleState.CurrentModule = module;
    }
}
